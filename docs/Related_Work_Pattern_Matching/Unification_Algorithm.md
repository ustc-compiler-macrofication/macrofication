# 合一算法
### 概述
将一阶谓词演算中的统一问题描述为一个方程组的解，论文对此给出了一个不确定性算法。作者给出了用Pascal语言实现的算法，与其他常见的统一算法相比，论文给出的算法在所有测试样例中都表现良好。

在本质上，一阶逻辑中的统一问题可以表示为如下：给定两个包含一些变量的项，如果存在的话，找到最简单的代换（即对每一个变量赋值一个项），使这两个项相等（即编译原理中介绍的合一代换）。由此产生的替代是最一般的，也是唯一的变量重命名。许多基于解析度的系统被构建出来，并且在各种不同的应用程序尝试。尽管进一步的研究表明，在解搜索过程中，解析系统很难直接引导，因此往往容易产生组合爆炸。

### 合一算法
#### 预备定义
首先我们定义一个函数符号的集合A，A中包含了n个函数符号A1,A2,...,An,如下：
```
A=  U  Ai  (Ai ∩ Aj = O, i ≠ j，0<=i,j<=n)
```
其中A0表示常数符号的集合，另外令V表示所有变量的集合。再令项的递归定义如下：
(1) 常数符号和变量是项
(2) 如果t1,t2,...,tn是项，那么f(t1,t2,...,tn)也是项
一个代换θ形式为θ= {(t1, x1), (t2, x2),..., (tm, xm)}，其中xi表示不同的变量，ti为项，每一对括号表示把所有的xi替换成ti。例如有一个项t为 t = f(x1, g(x2), a)，代换θ={(h(x2), x1), (b, x2)}，我们记tθ=f(h(x2), g(b), a)，tθθ=f(h(b), g(b), a)。
#### 项缩减方法
对于如下方程：
```
f(t'1, t'2, ... , t'n) = f(t''1, t''2, ... ,t''n ), f∈An
```
其中根函数是相同的，即f，我们使用项缩减方法将这一方程替换成：
```
t'1=t''1
t'2=t''2
...
t'n=t''n
```
#### 变量消除方法
对于方程x=t，我们应用代换θ={(t,x)}，得到新的一组方程，并且不擦除原方程x=t。
#### 算法描述
给定一组方程，重复执行以下各步转换，如果没有任何一步进行了转换，以成功结束。
(a)选择所有具有如下形式的方程：
```
t=x
```
其中t是项但不是变量，把它重写为：
```
x=t
```
(b)选择具有如下形式的方程：
```
x=x
```
其中两边是同一变量，直接擦除这一方程。
(c)选择所有具有如下形式的方程：
```
t'=t''
```
其中t'和t''都不是变量，如果两个项的根函数不同，则以失败结束，否则应用项缩减方法。
(d)选择所有具有如下形式的方程：
```
x=t
```
其中x为变量，t为非变量的项，如果x在t中出现，则算法以失败结束，否则应用变量消除方法。
#### 示例
例如我们考虑如下一组方程：
```
g(x2) = x1
f(x1, h(x1), x2) = f(g(x3), x4, x3)
```
首先我们对第一个方程应用转换(a)，得到：
```
x1 = g(x2) 
f(x1, h(x1), x2) = f(g(x3), x4, x3)
```
然后对第二个方程应用转换(c)，得到：
```
x1 = g(x2) 
x1 = g(x3)
h(x1) = x4
x2 = x3
```
然后对第一、四个方程应用转换(d)，得到：
```
x1 = g(x3) 
g(x3) = g(x3)
h(g(x3)) = x4
x2 = x3
```
然后对第三个方程应用转换(a)，对第二个方程应用转换(c)，对第三个方程应用转换(d)，得到：
```
x1 = g(x3)
x3 = x3
x4 = h(g(x3))
x2 = x3
```
然后对对第二个方程应用转换2，得到：
```
x1 = g(x3)
x4 = h(g(x3))
x2 = x3
```
已经没有可以应用的转换，于是最终的合一代换为：
```
θ = {g(x3) , x1), (h(g(x3) , x4), (x3 , x2)}
```
### 参考文献
Martelli, A., Montanari, U.: An efficient unification algorithm.
